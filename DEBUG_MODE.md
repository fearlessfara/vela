# VTL Parser Debug Mode

The VTL parser includes a built-in debug mode that displays detailed information about how templates are parsed, including tokenization and parsing steps.

## Usage

### Using the VtlParser class directly:

```typescript
import { VtlParser } from './src/parser/vtlParser.js';

const parser = new VtlParser(true); // Enable debug mode
const result = parser.parse(template);
```

### Using the VelocityEngine:

```typescript
import { VelocityEngine, VtlParser } from './src/index.js';

// The parser can be accessed for debugging
const parser = new VtlParser(true); // Enable debug mode
const parseResult = parser.parse(template);
```

## Debug Output

When debug mode is enabled, the parser will display:

1. **Input Template**: The original template being parsed
2. **Lexer Result**: 
   - List of all tokens generated by the lexer
   - Token type, content, and position information
   - Any lexer errors
3. **Parser Result**:
   - Success/failure status
   - Detailed error information if parsing fails
   - Complete Concrete Syntax Tree (CST) if parsing succeeds

## Example Output

```
=== VTL PARSER DEBUG ===
Input: #set($name = "World")
Hello $name!

Lexer Result:
Tokens:
0: SetDirective: "#set"
1: LParen: "("
2: DollarRef: "$name"
3: Assign: "="
4: StringLiteral: '"World"'
5: RParen: ")"
6: Newline: "\n"
7: Text: "Hello "
8: DollarRef: "$name"
9: Newline: "\n"

Parser Result:
Parse successful!
CST: { ... detailed syntax tree ... }
=== END DEBUG ===
```

## When to Use Debug Mode

- **Debugging parsing errors**: When templates fail to parse, debug mode shows exactly where and why
- **Understanding tokenization**: See how the lexer breaks down your template into tokens
- **Learning VTL syntax**: Understand how different VTL constructs are parsed
- **Troubleshooting complex templates**: Debug mode helps identify issues in nested expressions and directives

## Performance Note

Debug mode adds overhead due to console logging and detailed CST generation. Only enable it during development and debugging, not in production.
